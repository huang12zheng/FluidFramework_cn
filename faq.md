以下是关于fluid的一些最常见问题的简短(有些是肤浅的)答案
框架.

## 什么是Fluid Framework？

Fluid Framework是客户端库的集合,用于构建具有分布式状态的应用程序.这些库文件
允许多个客户端使用编码在共享的同步分布式数据结构(DDS)上创建和操作
与用于本地数据的模式相似的模式. Fluid Framework管理与服务的连接并保留所有
客户端同步,以便开发人员可以专注于客户端体验.

Fluid Framework的设计以性能和易于开发为重中之重.

## 分布式数据结构

### 什么是DDS？

DDS是 distributed data structure 的缩写. DDS是Fluid Framework的基础.他们被设计成这样
Fluid运行时能够使它们在客户端之间保持同步,而每个客户端在很大程度上都在DDS上运行
他们对本地数据进行操作的方式相同.fluid解决方案的数据源可以代表许多DDS.

DDS有很多类型,包括作为JavaScript映射的分布式版本的SharedMap和SharedString
旨在使多个客户端同时实时编辑文本数据.开发人员可以使用
Fluid Framework中包含的DDS或开发新的DDS.

DDS的数据类型和大小的任何实际限制将特定于该DDS的实现. DDS
可以包含文本,图像和其他二进制数据,并且可以有效地为任意大小.但是,在客户端上管理规模
需要思考,就像处理本地数据时一样.

### 数据存储在哪里？

回答此问题时,有两类数据存储需要讨论:**会话存储**和
**永久存储**.

**会话存储**由Fluid服务管理,本质上是在DDSes上进行的所有操作的中央记录. Fluid客户端使用此记录来生成DDS的相同本地实例.
会话存储还包括对过去所有操作进行汇总(摘要)的操作,以提高加入客户端的性能
会话,以提高保存到永久性存储时的效率.

**永久存储**是在Fluid服务之外保存的操作(和摘要操作)的记录.这可能是
数据库,blob存储或文件.使用持久性存储可以使Fluid解决方案在会话之间持久化.
例如,当前的Microsoft 365 Fluid体验将操作保存在SharePoint和OneDrive中的* .fluid *文件中.
重要的是要注意,这些文件共享普通文件的许多属性,例如权限和
文件结构中的位置,但由于这些体验取决于Fluid服务,因此下载文件和
不支持在本地工作.

### 数据如何同步？

为了使所有客户端保持同步,必须将它们连接到Fluid服务.该服务的核心
负责对所有传入的Fluid操作进行排序,然后将其广播给所有客户.因为
操作是有序的,并且因为每个客户端都运行相同的代码,所以每个客户端中的DDS最终都以
相同的状态.

请注意,没有针对所有Fluid体验的集中式Fluid服务.但是对于每个Fluid体验,只有
一项fluid服务.

Fluid客户端使用WebSocket协议连接到Fluid服务.但是,Fluid运行时管理
所有的联系,以便Fluid客户开发人员可以专注于本地体验.

## 规模

### 此支持多少个并发用户？

这不能一概而论.因为Fluid服务非常轻巧,所以即使是简单的服务实现也可以
支持100个并发用户.更复杂的实现可以分配工作并支持1000多个工作.
客户的体验会因Fluid数据存储和本地设备而异.在考虑规模时
灵活的解决方案,要考虑客户能够很好地处理和呈现更改,而不是服务是否能够
有效地分配它们.

此外,根据用户是否纯粹是查看者还是编辑者,容量存在显着差异.
与添加编辑器相比,添加查看器的规模要大得多,因为每个编辑器都会增加更改的数量,并且查看器
不要.

### 如何设计可扩展的Fluid Framework解决方案？

考虑规模时,有两个关键因素:服务规模和客户规模.fluid服务的设计
从头到尾都具有极高的可扩展性.虽然有可能将服务改进到
它具有惊人的可扩展性,对于大多数Fluid开发人员而言,更大的关注点将是客户规模.

在处理客户规模时,开​​发人员需要考虑如何管理入站更改,尤其是当
变化量很大.开发人员在考虑哪种DDS类型时应考虑的具体策略
使用以及数据结构化.从那里,开发人员可以着眼于使用虚拟化将更新限制为
当前范围内的视图部分.另一种策略可能是限制入站更改以限制
所需的更新数量.当然,正确的策略将在很大程度上取决于特定的情况.

## fluid技术

### Fluid Framework和SignalR有什么区别？

SignalR是一项主要旨在简化服务器与客户端之间的实时通信的技术,
Fluid Framework进一步抽象了这种交流,更重要的是,它着重于在
多个客户.因此,尽管您可能使用Fluid解决了今天使用SignalR解决的一些相同问题,
两者不可互换.值得注意的是,Fluid解决方案的服务器组件是轻量级的,通用的
设计用于分配状态的SignalR解决方案将需要其他服务器开发.

### Fluid是否使用运算变换？

Fluid不使用运算变换(OT),但是我们从OT的文献中学到了很多.而
OT使用的操作可以通过转换操作来无序应用,以说明最近的变化,Fluid
依靠总订单广播来保证所有操作都按特定顺序进行.

### Fluid是否使用CRDT？

Fluid不使用无冲突的复制数据类型(CRDT),但是我们的模型比OT更类似于CRDT.
Fluid框架依赖于基于更新的操作,这些操作使用我们的总订单广播进行订购,以防止
冲突.由于存在显式排序,因此这使我们可以进行非交换操作.

## 用例

### 实时编辑文本有哪些支持？

这是Fluid最初旨在支持的方案.因此,fluid框架是理想的基础
适用于支持多个客户端同时进行编辑的RTF编辑器. SharedString DDS是
为这种情况量身定制.

### 回合制游戏？

DDS可以用于分配游戏状态,包括轮到谁.由客户来执行规则
游戏,因此在防止作弊方面可能会解决一些有趣的问题,但Fluid团队已经
制作了几款游戏的原型.

### 存在,包括鼠标光标？

理想的情况是跟踪并共享每个用户在网格,文档或其他虚拟空间中的位置
因为它旨在实现出色的性能,所以它是Fluid框架的一项任务.

## fluid服务

### 服务器上需要运行什么？

Fluid Framework需要Fluid服务才能在客户端之间同步数据.服务器的作用非常简单:
它命令操作并将其广播给所有客户端.它还负责将操作保存到
持久数据存储.

fluid服务是通用的,通常,fluid解决方案可与任何fluid服务一起使用.的开发者
fluid解决方案可以使用本地服务器或"测试质量"服务器进行开发,并相信其解决方案
将与解决方案所针对的任何生产服务器一起工作.

Fluid Framework包含称为Routerlicious的Fluid服务的参考实现,可用于
开发或作为生产质量服务器的基础.

### 共享数据存储在哪里？

数据存储的详细信息(会话数据和持久数据)将取决于
fluid服务.这里有很大的灵活性,fluid服务的开发人员可以选择提供
有关数据存储位置和方式的选项.

### 是否有用于同步客户端的专用云服务？

Microsoft已开发了一种特定于M365的Fluid服务,旨在在其中支持由Fluid支持的解决方案.
生态系统. Fluid Framework开发人员将可以在M365中进行操作,但是这些集成点是
还不可用.

Microsoft还希望提供更通用的Fluid服务,但目前尚无详细信息.

### 除了SharePoint,我们还可以在哪里存储.fluid文件？

.fluid文件是与M365集成的Fluid解决方案可以理解的一种特定文件格式.它们旨在运行
仅在云中(永远不在本地),当前仅由OneDrive和SharePoint支持.

### 我们可以独立使用不依赖其他服务的Fluid Framework吗？

是. Fluid Framework旨在独立存在.它不依赖于其他服务.

### 可以在无法访问Internet的情况下使用Fluid Framework吗？

这个问题有两个角度.一是客户端是否必须连接到互联网.另一个是
组织是否可以在现场运行Fluid服务以支持Intranet.

客户必须连接到Fluid服务.fluid可以承受短暂的网络中断并继续运行
但最终的希望是合并局部更改会减弱.我们正在研究使用
其他旨在对大三角洲进行推理的合并技术,但今天还没有最终解决方案.

原则上,没有什么可以阻止组织在Intranet上托管Fluid服务.但是,微软
没有计划直接支持该方案.

### Fluid参考服务器实现已准备就绪吗？

不能.Routericious本身还不能投入生产.使用它需要更多关于存储,扩展,
安全性以及在Internet上构建服务时的其他典型注意事项.我们期望大多数
Fluid开发人员将能够利用随着我们接近1.0版而出现的现有Fluid服务.

### 如何部署Fluid解决方案？

最终,fluid解决方案是简单的JavaScript.在Microsoft,Fluid解决方案已部署到CDN,例如
任何其他静态资源.因为Fluid是非常以客户为中心的,所以部署非常简单.

## 冲突与历史

### Fluid Framework如何处理冲突解决方案？

这在很大程度上取决于特定的DDS.但是,无论数据的最终状态如何,都将存储操作
在Fluid ops流中.因此,如果客户对最终状态不满意,可以采用以下方法
达成可以内置于DDS或由客户处理的共识.

### 我们可以创建自定义策略来处理对分布式数据结构的更新冲突吗？

是.您可以使用自己的合并策略设计自己的DDS.您还可以访问所有
操作并可以编写客户端代码以最适合您的情况的任何方式进行状态推断.

### 我们可以拥有变更的历史吗？

是.fluid固有地保留所有更改,并且这些更改可通过框架访问.唯一的警告是
在性能和存储效率方面,需要不时总结操作.这可能会导致
粒度.

### 有什么方法可以知道哪个用户引起了每次更改吗？

是.操作可以归因于用户.这是一种实现选择,不是直接内置于其中的东西
fluid框架.

## UX框架

### 我可以使用React,Angular,VUE,Svelte或其他一些UX框架吗？

是.您可以使用为Web设计的任何UX框架.

### 与Fluent UI有什么关系？

Fluent和Fluid Framework都来自Microsoft.在Microsoft内部,许多Fluid项目也使用Fluent.
但是除了名称相似外没有其他关系.

### Fluid是否想成为UX框架的竞争对手？

一点也不. Fluid框架对UX毫无疑问.

## 编码框架

### 我可以使用ASP.NET,ASP.NET Core和C\#吗？

Fluid Framework是用TypeScript编写的,但我们不希望它局限于Web.您可以使用fluid框架
非JavaScript技术,通过利用JavaScript运行时来托管Fluid代码.最终至关重要的是,相同的
代码将在所有客户端中运行以确保最终的数据一致性,因此将Fluid移植到其他代码是不切实际的
构架.

这也适用于Blazor,Xamarin,MAUI和其他移动框架.

## 浏览器

### 支持哪些浏览器？
浏览器支持有很多细微差别,但通常,Fluid Framework支持现代浏览器,我们建议
您使用与您的操作系统兼容的最新浏览器. 以下浏览器是
支持的.

*新的[Microsoft Edge](https://www.microsoft.com/edge)
* Safari(最新版本,仅Mac)
* [Mozilla Firefox](https://www.mozilla.org/firefox)(最新版本)
* [Google Chrome](https://www.google.com/chrome/browser/index.html)(最新版本)

但是,使用JavaScript生态系统中的编译器和其他工具,可以创建基于Fluid Framework的软件.
支持其他浏览器的应用程序.